FFS; 

Get["func.n"]; ! load user defined functions (not necessary)
ring$name="HER"; ! "HER" 
Library@Require["LEROptics","HEROptics"];
ring=If[ring$name=="LER", LEROptics[] , HEROptics[] ];

fn = "/nfs/sadnas1a/users/jkeintze/SKEKB_TbT_analysis/input_data_2019_11_01/HER_2019_11_01_19_03_16.data";
dat0=Get[fn];
opticsname=dat0[1,3];
ring@ReadOpticsFile[opticsname];
CALC;
CreatePlainDeck["/nfs/sadnas1a/users/jkeintze/SKEKB_TbT_analysis/lattices/HER_2019_11_01_19_03_16.data", "RING"];

abort;
